from unittest import TestCase
from api.utils.lcs import lcs
from api.models.coordinate import Coordinate


class TestLCS(TestCase):
    def setUp(self):
        self.maxDiff = None
        print("test lcs start")

    def test_lcs(self):
        """
        data from geolife taxi 2
        """
        rv, _, _ = lcs(
        [
            Coordinate('116.47209120858315', '39.92679854210712'),
            Coordinate('116.47207401257918', '39.925819037686715'),
            Coordinate('116.47206209699006', '39.92531557032271'),
            Coordinate('116.47200253256527', '39.92279880479697'),
            Coordinate('116.4719800288251', '39.92184795808463'),
            Coordinate('116.47197529238407', '39.92164783004629'),
            Coordinate('116.47182184565344', '39.92165309551633'),
            Coordinate('116.47113100753717', '39.92167680138081'),
            Coordinate('116.4699885950235', '39.92171600286028'),
            Coordinate('116.46881997143075', '39.92175772611255'),
            Coordinate('116.46685301810919', '39.92182813410077'),
            Coordinate('116.46609734295527', '39.92185048584306'),
            Coordinate('116.46437921759396', '39.92190100423068'),
            Coordinate('116.46401225713636', '39.92191179404327'),
            Coordinate('116.46353806846301', '39.92192573670877'),
            Coordinate('116.4619773580576', '39.92197342042566'),
            Coordinate('116.46086796658192', '39.92200732056813'),
            Coordinate('116.46023330563975', '39.922007724232266'),
            Coordinate('116.45989995451296', '39.92200793625397'),
            Coordinate('116.45849995547587', '39.92200882669699'),
            Coordinate('116.4573537139003', '39.922009555742356'),
            Coordinate('116.45676208654673', '39.92202741210698'),
            Coordinate('116.45572445815186', '39.9220587295754'),
            Coordinate('116.45520030979515', '39.9220587295754'),
            Coordinate('116.45327172696453', '39.922069532917504'),
            Coordinate('116.45176645508869', '39.922078077595984'),
            Coordinate('116.45028572045905', '39.92208648298874'),
            Coordinate('116.44931612755636', '39.922091762078956'),
            Coordinate('116.44895150770884', '39.922093747304984'),
            Coordinate('116.44711438075709', '39.92210864846651'),
            Coordinate('116.44671167686683', '39.92205723945924'),
            Coordinate('116.44662949492532', '39.922049815067936'),
            Coordinate('116.44638385131323', '39.92202762340071'),
            Coordinate('116.4462762749474', '39.92200193907807'),
            Coordinate('116.44611469908315', '39.921963362141625'),
            Coordinate('116.44582673413665', '39.92185029957854'),
            Coordinate('116.4456028441847', '39.92173928592516'),
            Coordinate('116.44556782500966', '39.92172301199923'),
            Coordinate('116.44535473984527', '39.92162398818785'),
            Coordinate('116.4450894991701', '39.92157071653539'),
            Coordinate('116.44503652734144', '39.92156864428782'),
            Coordinate('116.44478477041687', '39.92155879560617'),
            Coordinate('116.44425764182786', '39.92157760832259'),
            Coordinate('116.44411887476114', '39.92158729407759'),
            Coordinate('116.4433432217369', '39.92165277464307'),
            Coordinate('116.441395294862', '39.92181721847208'),
            Coordinate('116.44087063241126', '39.92186151043368'),
            Coordinate('116.43993332475274', '39.92194063787029'),
            Coordinate('116.4397735011155', '39.92195583034086'),
            Coordinate('116.43890067425893', '39.92203879927185'),
            Coordinate('116.43846984442628', '39.92210808967295'),
            Coordinate('116.43630368786059', '39.922563707398126'),
            Coordinate('116.43601506432924', '39.92262441491986'),
            Coordinate('116.43551252265675', '39.92270823395345'),
            Coordinate('116.43472085654689', '39.92280903264269'),
            Coordinate('116.43460113036485', '39.92282427674884'),
            Coordinate('116.43449142056312', '39.92283694273614'),
            Coordinate('116.43143388848232', '39.92311745710188'),
            Coordinate('116.43071900525806', '39.92317743427703'),
            Coordinate('116.4300577662153', '39.92319010026433'),
            Coordinate('116.43002351767538', '39.92318864287965'),
            Coordinate('116.42942744708272', '39.92316327817358'),
            Coordinate('116.4291744998658', '39.923207236600085'),
            Coordinate('116.42907064769372', '39.923248427584106'),
            Coordinate('116.42893123840388', '39.92330372162097'),
            Coordinate('116.42880327467925', '39.92337561972534'),
            Coordinate('116.42870194678088', '39.92359466679979'),
            Coordinate('116.42869883095358', '39.92366788874145'),
            Coordinate('116.4286475575413', '39.92487281392975'),
            Coordinate('116.42860813077806', '39.924964673457275'),
            Coordinate('116.42844993088654', '39.92533325982094'),
            Coordinate('116.42843149069915', '39.92555323821798'),
            Coordinate('116.42842925552493', '39.925632028109554'),
            Coordinate('116.42841543923885', '39.92603398232978'),
            Coordinate('116.42839426897777', '39.92664988415174'),
            Coordinate('116.42837505254988', '39.927208943528136'),
            Coordinate('116.42837081739795', '39.927333416383654'),
            Coordinate('116.4283206633103', '39.92880746563094'),
            Coordinate('116.42827446970956', '39.9296756445544'),
            Coordinate('116.4282532355544', '39.930198861588515'),
            Coordinate('116.42818431768234', '39.930544568535936'),
            Coordinate('116.42817407313379', '39.930860845689345'),
            Coordinate('116.4280278554863', '39.93373900503827'),
            Coordinate('116.42801667961515', '39.934085643308286'),
            Coordinate('116.42803381595091', '39.93445239814637'),
            Coordinate('116.42788797083247', '39.93466231825938'),
            Coordinate('116.42782240572174', '39.93595108246694'),
            Coordinate('116.42764992477707', '39.93968605860366'),
            Coordinate('116.42759181024712', '39.94150698054225'),
            Coordinate('116.42757572726848', '39.942515970765214'),
            Coordinate('116.42756986617158', '39.94288367562927'),
            Coordinate('116.42756070407243', '39.94345847390872'),
            Coordinate('116.42756126286599', '39.94390755766423'),
            Coordinate('116.427575977763', '39.94579907385556'),
            Coordinate('116.42751227529747', '39.94626343130164'),
            Coordinate('116.42742659563083', '39.94649726963173'),
            Coordinate('116.4273554405724', '39.9466914671665'),
            Coordinate('116.42714198143352', '39.94705896706266'),
            Coordinate('116.42704863193882', '39.947163425326394'),
            Coordinate('116.42685084999019', '39.94738474370654'),
            Coordinate('116.42632722904328', '39.94776811421721'),
            Coordinate('116.42617769001822', '39.94787759962404'),
            Coordinate('116.42573195902403', '39.94806349161409'),
            Coordinate('116.42529745209194', '39.9482055172878'),
            Coordinate('116.42529032584929', '39.948207846616384'),
            Coordinate('116.42487849499759', '39.94829259697257'),
            Coordinate('116.42479677857028', '39.94830238138497'),
            Coordinate('116.42451136763047', '39.948336555399074'),
            Coordinate('116.42416603321207', '39.94835778955425'),
            Coordinate('116.42308421973487', '39.948349410152005'),
            Coordinate('116.42231437762784', '39.94834344718628'),
            Coordinate('116.41550044899063', '39.948125890227985'),
            Coordinate('116.41402784170272', '39.94808360818215'),
            Coordinate('116.40536710035876', '39.9477766442547'),
            Coordinate('116.40468146066401', '39.94785655173339'),
            Coordinate('116.40465530729963', '39.947864868284405'),
            Coordinate('116.40450339178376', '39.94791317614719'),
            Coordinate('116.40426404187673', '39.9479679379158'),
            Coordinate('116.40405824337901', '39.94799354119347'),
            Coordinate('116.40402748593749', '39.94799736770982'),
            Coordinate('116.40278435653711', '39.94798991712905'),
            Coordinate('116.40273387053496', '39.94798955304731')
        ],
        [
            Coordinate('116.47209120858315', '39.92679854210712'),
            Coordinate('116.47207401257918', '39.925819037686715'),
            Coordinate('116.47206209699006', '39.92531557032271'),
            Coordinate('116.47200253256527', '39.92279880479697'),
            Coordinate('116.4719800288251', '39.92184795808463'),
            Coordinate('116.47197529238407', '39.92164783004629'),
            Coordinate('116.47182184565344', '39.92165309551633'),
            Coordinate('116.4699885950235', '39.92171600286028'),
            Coordinate('116.46881997143075', '39.92175772611255'),
            Coordinate('116.46685301810919', '39.92182813410077'),
            Coordinate('116.46609734295527', '39.92185048584306'),
            Coordinate('116.46437921759396', '39.92190100423068'),
            Coordinate('116.46353806846301', '39.92192573670877'),
            Coordinate('116.4619773580576', '39.92197342042566'),
            Coordinate('116.46086796658192', '39.92200732056813'),
            Coordinate('116.46023330563975', '39.922007724232266'),
            Coordinate('116.45849995547587', '39.92200882669699'),
            Coordinate('116.4573537139003', '39.922009555742356'),
            Coordinate('116.45676208654673', '39.92202741210698'),
            Coordinate('116.45572445815186', '39.9220587295754'),
            Coordinate('116.45520030979515', '39.9220587295754'),
            Coordinate('116.45327172696453', '39.922069532917504'),
            Coordinate('116.45176645508869', '39.922078077595984'),
            Coordinate('116.45028572045905', '39.92208648298874'),
            Coordinate('116.44931612755636', '39.922091762078956'),
            Coordinate('116.44895150770884', '39.922093747304984'),
            Coordinate('116.44711438075709', '39.92210864846651'),
            Coordinate('116.44671167686683', '39.92205723945924'),
            Coordinate('116.44662949492532', '39.922049815067936'),
            Coordinate('116.44638385131323', '39.92202762340071'),
            Coordinate('116.44611469908315', '39.921963362141625'),
            Coordinate('116.44582673413665', '39.92185029957854'),
            Coordinate('116.4456028441847', '39.92173928592516'),
            Coordinate('116.44556782500966', '39.92172301199923'),
            Coordinate('116.44535473984527', '39.92162398818785'),
            Coordinate('116.4450894991701', '39.92157071653539'),
            Coordinate('116.44478477041687', '39.92155879560617'),
            Coordinate('116.44425764182786', '39.92157760832259'),
            Coordinate('116.44411887476114', '39.92158729407759'),
            Coordinate('116.4433432217369', '39.92165277464307'),
            Coordinate('116.441395294862', '39.92181721847208'),
            Coordinate('116.43993332475274', '39.92194063787029'),
            Coordinate('116.4397735011155', '39.92195583034086'),
            Coordinate('116.43890067425893', '39.92203879927185'),
            Coordinate('116.43846984442628', '39.92210808967295'),
            Coordinate('116.43630368786059', '39.922563707398126'),
            Coordinate('116.43601506432924', '39.92262441491986'),
            Coordinate('116.43551252265675', '39.92270823395345'),
            Coordinate('116.43472085654689', '39.92280903264269'),
            Coordinate('116.43460113036485', '39.92282427674884'),
            Coordinate('116.43449142056312', '39.92283694273614'),
            Coordinate('116.43143388848232', '39.92311745710188'),
            Coordinate('116.43071900525806', '39.92317743427703'),
            Coordinate('116.4300577662153', '39.92319010026433'),
            Coordinate('116.43002351767538', '39.92318864287965'),
            Coordinate('116.42942744708272', '39.92316327817358'),
            Coordinate('116.4291744998658', '39.923207236600085'),
            Coordinate('116.42893123840388', '39.92330372162097'),
            Coordinate('116.42880327467925', '39.92337561972534'),
            Coordinate('116.42870194678088', '39.92359466679979'),
            Coordinate('116.42869883095358', '39.92366788874145'),
            Coordinate('116.4286475575413', '39.92487281392975'),
            Coordinate('116.42860813077806', '39.924964673457275'),
            Coordinate('116.42844993088654', '39.92533325982094'),
            Coordinate('116.42843149069915', '39.92555323821798'),
            Coordinate('116.42842925552493', '39.925632028109554'),
            Coordinate('116.42841543923885', '39.92603398232978'),
            Coordinate('116.42837505254988', '39.927208943528136'),
            Coordinate('116.42831714346056', '39.927317847188654'),
            Coordinate('116.42817537698542', '39.92758445279861'),
            Coordinate('116.42812918338468', '39.92901515056972'),
            Coordinate('116.42797830912423', '39.93228688684747'),
            Coordinate('116.42788797083247', '39.93466231825938'),
            Coordinate('116.42782240572174', '39.93595108246694'),
            Coordinate('116.42764992477707', '39.93968605860366'),
            Coordinate('116.42759181024712', '39.94150698054225'),
            Coordinate('116.42757572726848', '39.942515970765214'),
            Coordinate('116.42756070407243', '39.94345847390872'),
            Coordinate('116.42756126286599', '39.94390755766423'),
            Coordinate('116.427575977763', '39.94579907385556'),
            Coordinate('116.42751227529747', '39.94626343130164'),
            Coordinate('116.42742659563083', '39.94649726963173'),
            Coordinate('116.4273554405724', '39.9466914671665'),
            Coordinate('116.42714198143352', '39.94705896706266'),
            Coordinate('116.42685084999019', '39.94738474370654'),
            Coordinate('116.42632722904328', '39.94776811421721'),
            Coordinate('116.42617769001822', '39.94787759962404'),
            Coordinate('116.42573195902403', '39.94806349161409'),
            Coordinate('116.42529745209194', '39.9482055172878'),
            Coordinate('116.42529032584929', '39.948207846616384'),
            Coordinate('116.42487849499759', '39.94829259697257'),
            Coordinate('116.42451136763047', '39.948336555399074'),
            Coordinate('116.42416603321207', '39.94835778955425'),
            Coordinate('116.42308421973487', '39.948349410152005'),
            Coordinate('116.42231437762784', '39.94834344718628'),
            Coordinate('116.41550044899063', '39.948125890227985'),
            Coordinate('116.41402784170272', '39.94808360818215'),
            Coordinate('116.40536710035876', '39.9477766442547'),
            Coordinate('116.40468146066401', '39.94785655173339'),
            Coordinate('116.40465530729963', '39.947864868284405'),
            Coordinate('116.40450339178376', '39.94791317614719'),
            Coordinate('116.40426404187673', '39.9479679379158'),
            Coordinate('116.40402748593749', '39.94799736770982'),
            Coordinate('116.40278435653711', '39.94798991712905')
        ])
        self.assertEqual([
            Coordinate('116.47209120858315', '39.92679854210712'),
            Coordinate('116.47207401257918', '39.925819037686715'),
            Coordinate('116.47206209699006', '39.92531557032271'),
            Coordinate('116.47200253256527', '39.92279880479697'),
            Coordinate('116.4719800288251', '39.92184795808463'),
            Coordinate('116.47197529238407', '39.92164783004629'),
            Coordinate('116.47182184565344', '39.92165309551633'),
            Coordinate('116.4699885950235', '39.92171600286028'),
            Coordinate('116.46881997143075', '39.92175772611255'),
            Coordinate('116.46685301810919', '39.92182813410077'),
            Coordinate('116.46609734295527', '39.92185048584306'),
            Coordinate('116.46437921759396', '39.92190100423068'),
            Coordinate('116.46353806846301', '39.92192573670877'),
            Coordinate('116.4619773580576', '39.92197342042566'),
            Coordinate('116.46086796658192', '39.92200732056813'),
            Coordinate('116.46023330563975', '39.922007724232266'),
            Coordinate('116.45849995547587', '39.92200882669699'),
            Coordinate('116.4573537139003', '39.922009555742356'),
            Coordinate('116.45676208654673', '39.92202741210698'),
            Coordinate('116.45572445815186', '39.9220587295754'),
            Coordinate('116.45520030979515', '39.9220587295754'),
            Coordinate('116.45327172696453', '39.922069532917504'),
            Coordinate('116.45176645508869', '39.922078077595984'),
            Coordinate('116.45028572045905', '39.92208648298874'),
            Coordinate('116.44931612755636', '39.922091762078956'),
            Coordinate('116.44895150770884', '39.922093747304984'),
            Coordinate('116.44711438075709', '39.92210864846651'),
            Coordinate('116.44671167686683', '39.92205723945924'),
            Coordinate('116.44662949492532', '39.922049815067936'),
            Coordinate('116.44638385131323', '39.92202762340071'),
            Coordinate('116.44611469908315', '39.921963362141625'),
            Coordinate('116.44582673413665', '39.92185029957854'),
            Coordinate('116.4456028441847', '39.92173928592516'),
            Coordinate('116.44556782500966', '39.92172301199923'),
            Coordinate('116.44535473984527', '39.92162398818785'),
            Coordinate('116.4450894991701', '39.92157071653539'),
            Coordinate('116.44478477041687', '39.92155879560617'),
            Coordinate('116.44425764182786', '39.92157760832259'),
            Coordinate('116.44411887476114', '39.92158729407759'),
            Coordinate('116.4433432217369', '39.92165277464307'),
            Coordinate('116.441395294862', '39.92181721847208'),
            Coordinate('116.43993332475274', '39.92194063787029'),
            Coordinate('116.4397735011155', '39.92195583034086'),
            Coordinate('116.43890067425893', '39.92203879927185'),
            Coordinate('116.43846984442628', '39.92210808967295'),
            Coordinate('116.43630368786059', '39.922563707398126'),
            Coordinate('116.43601506432924', '39.92262441491986'),
            Coordinate('116.43551252265675', '39.92270823395345'),
            Coordinate('116.43472085654689', '39.92280903264269'),
            Coordinate('116.43460113036485', '39.92282427674884'),
            Coordinate('116.43449142056312', '39.92283694273614'),
            Coordinate('116.43143388848232', '39.92311745710188'),
            Coordinate('116.43071900525806', '39.92317743427703'),
            Coordinate('116.4300577662153', '39.92319010026433'),
            Coordinate('116.43002351767538', '39.92318864287965'),
            Coordinate('116.42942744708272', '39.92316327817358'),
            Coordinate('116.4291744998658', '39.923207236600085'),
            Coordinate('116.42893123840388', '39.92330372162097'),
            Coordinate('116.42880327467925', '39.92337561972534'),
            Coordinate('116.42870194678088', '39.92359466679979'),
            Coordinate('116.42869883095358', '39.92366788874145'),
            Coordinate('116.4286475575413', '39.92487281392975'),
            Coordinate('116.42860813077806', '39.924964673457275'),
            Coordinate('116.42844993088654', '39.92533325982094'),
            Coordinate('116.42843149069915', '39.92555323821798'),
            Coordinate('116.42842925552493', '39.925632028109554'),
            Coordinate('116.42841543923885', '39.92603398232978'),
            Coordinate('116.42837505254988', '39.927208943528136'),
            Coordinate('116.42788797083247', '39.93466231825938'),
            Coordinate('116.42782240572174', '39.93595108246694'),
            Coordinate('116.42764992477707', '39.93968605860366'),
            Coordinate('116.42759181024712', '39.94150698054225'),
            Coordinate('116.42757572726848', '39.942515970765214'),
            Coordinate('116.42756070407243', '39.94345847390872'),
            Coordinate('116.42756126286599', '39.94390755766423'),
            Coordinate('116.427575977763', '39.94579907385556'),
            Coordinate('116.42751227529747', '39.94626343130164'),
            Coordinate('116.42742659563083', '39.94649726963173'),
            Coordinate('116.4273554405724', '39.9466914671665'),
            Coordinate('116.42714198143352', '39.94705896706266'),
            Coordinate('116.42685084999019', '39.94738474370654'),
            Coordinate('116.42632722904328', '39.94776811421721'),
            Coordinate('116.42617769001822', '39.94787759962404'),
            Coordinate('116.42573195902403', '39.94806349161409'),
            Coordinate('116.42529745209194', '39.9482055172878'),
            Coordinate('116.42529032584929', '39.948207846616384'),
            Coordinate('116.42487849499759', '39.94829259697257'),
            Coordinate('116.42451136763047', '39.948336555399074'),
            Coordinate('116.42416603321207', '39.94835778955425'),
            Coordinate('116.42308421973487', '39.948349410152005'),
            Coordinate('116.42231437762784', '39.94834344718628'),
            Coordinate('116.41550044899063', '39.948125890227985'),
            Coordinate('116.41402784170272', '39.94808360818215'),
            Coordinate('116.40536710035876', '39.9477766442547'),
            Coordinate('116.40468146066401', '39.94785655173339'),
            Coordinate('116.40465530729963', '39.947864868284405'),
            Coordinate('116.40450339178376', '39.94791317614719'),
            Coordinate('116.40426404187673', '39.9479679379158'),
            Coordinate('116.40402748593749', '39.94799736770982'),
            Coordinate('116.40278435653711', '39.94798991712905')
            ],rv)